# 输出示例

## 示例1: FreeRTOS低功耗设计

### 输入

```yaml
topic: "FreeRTOS低功耗设计"
key_points: ["电源管理器优先级", "引用计数实现"]
output_directory: "./rtos_notes"
```

### 输出文件

**文件1: ./rtos_notes/FreeRTOS电源管理_电源管理器任务优先级设置.txt**

```
电源管理器任务优先级设置策略

电源管理器必须设置为configMAX_PRIORITIES减1的最高优先级。作为资源守护者，它遵循立即优先级天花板协议，确保电源状态切换的零延迟。当任务释放运行模式引用计数归零时，电源管理器立即抢占CPU执行休眠序列，避免低优先级任务阻塞导致的功耗泄漏。该任务应设计为事件驱动，通过任务通知接收事件，执行时间控制在微秒级，避免长期占用CPU。若存在硬实时约束，可退至次高优先级，但需确保执行时间小于硬实时任务周期。绝对禁止将电源管理器设为低优先级，否则会导致无法进入低功耗状态。
```

**文件2: ./rtos_notes/FreeRTOS低功耗设计_引用计数电源管理机制.txt**

```
引用计数电源管理实现

使用原子变量记录运行模式引用次数，提供PWR_Request和PWR_Release接口。Request在引用计数从零变一时恢复全速时钟，Release在计数归零时通过任务通知触发电源管理器。必须在临界区内修改计数，使用taskENTER_CRITICAL确保原子性。对于多外设场景，可为每个电源域维护独立引用计数，实现精细电源控制。注意避免抖动，设置消抖延时防止频繁进出低功耗。引用计数方案适用于简单的二态电源管理，复杂场景需升级为电源状态投票机制，支持多级电源状态而非仅有运行和休眠。
```

## 示例2: 嵌入式系统时钟配置

### 输入

```yaml
topic: "STM32时钟系统配置"
key_points: ["PLL锁相环配置", "时钟安全系统CSS"]
output_directory: "./stm32_notes"
```

### 输出文件

**文件1: ./stm32_notes/STM32时钟系统_PLL锁相环配置详解.txt**

```
PLL锁相环时钟配置

PLL通过倍频输入时钟源生成高频系统时钟。配置流程包括选择输入源（HSI或HSE）、设置倍频系数、使能PLL并等待锁定。倍频公式为fVCO = fIN × (N/M)，其中N为倍频系数，M为预分频系数。VCO频率必须保持在器件规格范围内，通常为64-344MHz。输出频率通过P、Q、R分频器分配给不同总线。配置前需确保输入时钟稳定，使用RCC_CR寄存器的HSERDY或HSIRDY标志确认。PLL使能后必须轮询PLLRDY标志直至锁定完成，超时处理需纳入错误恢复机制。禁止在PLL运行时修改配置参数。
```

**文件2: ./stm32_notes/STM32时钟安全_CSS失效检测与自动切换.txt**

```
时钟安全系统CSS机制

CSS用于检测外部高速时钟HSE失效并自动切换至内部时钟源。使能CSS后，硬件持续监测HSE信号，一旦检测到失效立即触发NMI中断并自动将系统时钟源切换至HSI。CSS中断服务程序必须在NMI_Handler中实现，执行紧急故障处理如记录故障标志、通知应用层、尝试恢复外部时钟。CSS仅监测HSE，不监测HSI或PLL。失效切换后，PLL自动关闭，系统以HSI频率运行。恢复HSE需软件重新配置并重新使能PLL。建议在关键应用中始终使能CSS以提高系统可靠性。
```

## 内容结构要点

### 首句
定义概念或阐明原理，开门见山。

### 中段
技术细节、实现机制或关键参数，提供实用信息。

### 末段
设计影响、约束条件或最佳实践，给出指导建议。

## 字数统计方法

- 仅统计正文内容（不含标题和空行）
- 中文字符按1字计算
- 英文单词按1字计算
- 标点符号计入字数
- 目标范围: 250-300字
